---
layout: post
title: "Window 7配置octopress"
date: 2015-03-14 14:23:07 +0800
author: zylia
comments: true
categories: octopress
---
受一位同仁经常用octopress写博客的启发，我也准备搭个博客。

我的安装环境是Window 7 32位系统，需要事先下载的软件有：

<font size=2>
1) Git: http://msysgit.googlecode.com/files/Git-1.8.1.2-preview20130201.exe

2) Ruby: http://dl.bintray.com/oneclick/rubyinstaller/rubyinstaller-1.9.3-p551.exe

3) DevKit: http://dl.bintray.com/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe

<!-- more -->

4) Python: http://www.python.org/ftp/python/2.7.5/python-2.7.5.msi

5) easy_install: https://bootstrap.pypa.io/ez\_setup.py</font>

经过测试，这些软件版本可以安装成功。

## 安装 ##
**安装Git**

一路next就可以。

**安装Ruby**

也是一路next，记得勾选"Add Ruby executables to your PATH"，将Ruby的执行变量加入到环境变量中。

**安装DevKit**

DevKit是一个自解压文件，建议解压到D:/DevKit，需要注意解压目录中没有中文和空格。解压DevKit后，在命令行输入以下命令来安装：

`d:`  <br />
`cd DevKit`  <br />
`ruby dk.rb init`  <br />
`ruby dk.rb install`

**安装Python**

也是一路next就可以。

**安装easy_install**

在Python中安装第三方库需要使用easy\_install。我们用之前下载的ez\_setup.py脚本来下载和安装easy\_install。easy\_install会安装在Python安装目录的Scripts目录中，需要将easy\_install的安装目录(例如C:\Python27\Scripts)加入到环境变量中才能在命令行中使用easy_install命令。

Pygments模块用来使博客的代码高亮，我们在命令提示符中输入以下命令安装Pygments:

`easy_install pygments`

**安装octopress**

在GitBash中输入如下命令将octopress下载到本地：

`cd d:/GitProject`

`git clone git://github.com/imathis/octopress.git octopress`

在使用git clone命令时，github会自动在本地建立master分支，在后面我们将会建立source分支专门保存博客代码。

然后需要安装octopress的依赖项，安装依赖项需要用到Ruby的gem。由于国外的ruby站点经常会被屏蔽，我们使用国内的淘宝镜像作为gem的更新源：

`gem sources -r https://rubygems.org/`

`gem sources -a http://ruby.taobao.org/`

`gem sources -l`

我们会看到只有淘宝的链接。

修改octopress目录下的Gemfile文件，将第一行的`https://rubygems.org/`修改为`http://ruby.taobao.org/`

在命令提示符中进入到octopress目录，输入下面命令安装依赖项

`gem install bundler`

`bundle install`

输入下面命令安装octopress的默认主题

`rake install`

到此所有安装工作已经结束，输入下面命令:

`rake preview`

然后在浏览器中输入地址http://localhost:4000

就可以本地预览效果。

## 解决中文问题 ##

需要在系统中加入如下环境变量：

LANG=zh_CN.UTF-8

LC\_ALL=zh_CN.UTF-8

## 在octopress中添加文章 ##

在命令提示符中进入octopress的安装目录，输入如下命令新建文章：

`rake new_post['new article']`

生成的文件存在source/_posts目录中。

每次添加了新的博客文章后，需要执行下面命令才重新生成

`rake generate`
